<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Lars Vilhuber" />
  <title>Using Containers to Validate Research on Confidential Data at Scale</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="index_files/reveal.js-3.3.0.1/css/theme/night.css" id="theme">

<style type="text/css">
.reveal section img {
  background: rgba(255, 255, 255, 0.85);
}
</style>

  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>


<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="index_files/header-attrs-2.25/header-attrs.js"></script>
    <link href="index_files/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
    <link href="index_files/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Using Containers to Validate Research on
Confidential Data at Scale</h1>
    <h2 class="author">Lars Vilhuber</h2>
    <h3 class="date">May 2024</h3>
</section>

<section>
<section id="introduction" class="title-slide slide level1">
<h1>Introduction</h1>

</section>
<section id="concerns" class="slide level2">
<h2>Concerns</h2>
<p>Concerns about confidentiality in statistical products have increased
in the past several years:</p>
<ul>
<li>New disclosure avoidance techniques in the Decennial Census garnered
much attention (an understatement…),</li>
<li>also concerns about formal disclosure avoidance techniques for
public-use microdata files (PUMFs) (see <a
href="https://www.census.gov/newsroom/blogs/random-samplings/2022/12/disclosure-avoidance-protections-acs.html">Census
Bureau delayed implementation of such methods for the American Community
Survey</a>)</li>
</ul>
</section>
<section id="creating-synthetic-data" class="slide level2">
<h2>Creating synthetic data</h2>
<ul>
<li>Much effort put into creating privacy-protected or synthetic data
(this conference!)</li>
<li>Goal of each of these: <strong>release and forget</strong></li>
</ul>
<blockquote>
<p>But what if users don´t trust the data?</p>
</blockquote>
</section>
<section id="direct-access" class="slide level2">
<h2>Direct access</h2>
<ul>
<li>Many different RDC-style systems have been stood up over the past
35+ years in multiple countries</li>
<li>Provide direct access to confidential (pseudonymous) data</li>
<li>Still need output disclosure avoidance measures (mostly ad-hoc)</li>
<li>Expensive for stat agencies to maintain, expensive for users to
use</li>
</ul>
</section>
<section class="slide level2">

<blockquote>
<p>Alternative: validate analyses run on synthetic data against the
confidential data</p>
</blockquote>
</section>
<section id="validation-and-verification" class="slide level2">
<h2>Validation and Verification</h2>
<ul>
<li>long-running pilot projects with (non-formal) synthetic microdata
products (SynLBD, SIPP Synthetic Beta) came to an end in 2022 (<a
href="https://web.archive.org/web/20230602202220/https://web.archive.org/web/20221130032540/https://www2.vrdc.cornell.edu/news/">End
of life for the Cornell Synthetic Data Server September 30,
2022</a>)</li>
<li>not sure how active OPM Verification server was <span
class="citation" data-cites="barrientos_providing_2018">(Barrientos et
al. 2018)</span></li>
<li>scale an issue</li>
<li>not done or planned for most synthetic data products</li>
</ul>
</section>
<section id="scaling-up" class="slide level2">
<h2>Scaling up</h2>
<p>These pilot projects were not set up to scale, and yet they
demonstrated that there is a need for such a process.</p>
</section></section>
<section>
<section id="background" class="title-slide slide level1">
<h1>Background</h1>

</section>
<section id="anecdotal-evidence-with-sds" class="slide level2">
<h2>Anecdotal evidence with SDS</h2>
<p>From conversations/informal surveys:</p>
<ul>
<li>researchers were happy with the ability to access data without
having to request a full-blown project in an FSRDC</li>
<li>somewhat frustrated by the process (slowness)</li>
</ul>
</section>
<section id="reproducibility-and-sds" class="slide level2">
<h2>Reproducibility and SDS</h2>
<p>SDS validation required typically substantial human debugging</p>
<ul>
<li>Reason: problems with the reproducibility of code in the social
sciences despite similarity of environment.</li>
</ul>
</section>
<section id="intermediate-causes" class="slide level2">
<h2>Intermediate causes</h2>
<ul>
<li>no strong pre-testing of reproducibility, often intense use of
interactive programming practices</li>
<li>divergence in environments over time</li>
<li>divergence of data schemas over time</li>
</ul>
<p><strong>Failure to maintain strong links</strong></p>
</section>
<section id="some-broader-evidence" class="slide level2">
<h2>Some broader evidence</h2>
<p>In a sample of over <strong>8,000 replication packages</strong>
associated with high-profile economics articles, <strong>only 30% had
some sort of master script</strong>.</p>
</section></section>
<section>
<section id="other-systems" class="title-slide slide level1">
<h1>Other systems</h1>
<p>Statistical agencies and research institutes have explored various
ways to scale up access to confidential data, without full (remote)
access to confidential data.</p>
<ul>
<li>Statistics Canada: <a
href="https://www.statcan.gc.ca/en/microdata/rtra">Real Time Remote
Access (RTRA)</a> process,</li>
<li>Norway: <a href="microdata.no">Microdata.no</a> system,</li>
<li>Germany/IAB: <a
href="https://fdz.iab.de/en/data-access/on-site-use/">JoSuA
system</a></li>
</ul>
</section>
<section id="access-restrictions" class="slide level2">
<h2>Access restrictions</h2>
<p>Most such processes have limitations, including in their utility for
general purpose analysis</p>
<p>Most still have some <strong>strong access limitations</strong></p>
<ul>
<li>RTRA: organizational application process</li>
<li>microdata.no: Institutional MOU (and only Norwegian residents)</li>
<li>IAB: proposal process</li>
</ul>
</section>
<section id="analysis-restrictions" class="slide level2">
<h2>Analysis restrictions</h2>
<p>Many systems strongly <strong>limit the type of analysis</strong>
that is feasible by</p>
<ul>
<li>RTRA: restricting the software keywords that can be used, subset of
SAS allowing to “calculate frequencies, means, percentiles, percent
distribution, proportions, ratios and shares.<br />
</li>
<li>microdata.no: by creating a structured new statistical language
(albeit with increasingly sophisticated capabilities)</li>
</ul>
</section>
<section id="comparison" class="slide level2">
<h2>Comparison</h2>
<p>The comparison researchers and analysts make is (for right or wrong)
to the <strong>unfettered use of public-use data</strong> that
<strong>they trust</strong> …</p>
</section></section>
<section>
<section id="the-quest" class="title-slide slide level1">
<h1>The quest</h1>

</section>
<section id="direct-access-is-expensive" class="slide level2">
<h2>Direct access is expensive</h2>
<p>Remote-access or local secure access in the form of physical or
virtual secure data enclaves is still the dominant - <strong>but
expensive</strong> - way to access confidential data.</p>
<blockquote>
<p>The dominant method of access thus forces researchers to choose
between <strong>lower quality data</strong> in an environment that
corresponds to their preferred computing method (<em>public-use
data</em>), and <strong>higher quality confidential data</strong> in
environments that are <em>expensive</em> for researchers, data
providers, or both.</p>
</blockquote>
</section></section>
<section>
<section id="possible-solution" class="title-slide slide level1">
<h1>Possible solution</h1>

</section>
<section id="containers" class="slide level2">
<h2>Containers</h2>
<p>Containers are lightweight, standalone, executable packages that
contain everything needed to run an application, including the code, a
runtime, libraries, environment variables, and config files.<a
href="#/fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a></p>
</section>
<section id="containerized-validation" class="slide level2">
<h2>Containerized validation</h2>
<ul>
<li><strong>Containers</strong>,
<ul>
<li>hosted on public cloud platform or run on researcher laptop</li>
<li>provide access to synthetic or “plausible” data, and coding
resources</li>
<li>mechanism to ensure authors can validate reproducibility of
analysis</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>Then submitted to the <strong>confidential computing
environment</strong>.
<ul>
<li>analysis modified to use confidential data</li>
<li>enables a wide spectrum of plug-in disclosure avoidance measures as
well</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>similar in spirit: IAB JoSuA system, but without hosting costs</li>
</ul>
</div>
</section>
<section id="containers-in-the-wild" class="slide level2">
<h2>Containers in the wild</h2>
<p>One of the first mentions of containers for scientific research was
<span class="citation"
data-cites="boettiger_introduction_2015">Boettiger (2015)</span>.</p>
<ul>
<li><a href="https://codeocean.com">CodeOcean</a> is a commercial
service facilitating that process by making the resources available
through a web browser</li>
<li><a href="https://wholetale.org">Wholetale</a> and <a
href="https://mybinder.org">MyBinder</a> are other (academically
oriented) services that provide similar functionality<a href="#/fn2"
class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a></li>
<li>Many universities HPC clusters provide some support
(<code>Apptainer</code> more popular than <code>Docker</code>)</li>
</ul>
</section>
<section id="containers-in-social-sciences-are-still-a-challenge"
class="slide level2">
<h2>Containers in Social Sciences are still a challenge!</h2>
<p>In a sample of over <strong>8,000 replication packages</strong>
associated with high-profile economics articles, <strong>only 11 had a
<code>Dockerfile</code></strong> (the key build script for
containers).</p>
<p>(That’s n=11, not 11% - in fact, it’s <strong>0.13%</strong> of
replication packages.)</p>
</section>
<section id="whats-new" class="slide level2">
<h2>What’s new</h2>
<p>The use of containers in this way is novel as a systematic way to
provide <strong>scalable, potentially high-throughput
validation</strong>, and differs in usage from previous methods, such as
the Cornell Synthetic Data Server.</p>
<blockquote>
<p>I believe that it is promising as a modern way of implementing
validation when data are confidential.</p>
</blockquote>
</section></section>
<section>
<section id="user-perspective" class="title-slide slide level1">
<h1>User perspective</h1>

</section>
<section id="use-provided-container-with-pre-provisioned-data"
class="slide level2">
<h2>Use provided container with pre-provisioned data</h2>
<p>Possibilities:</p>
<ul>
<li>use directly (<em>safer</em>)</li>
<li>use as input to build own container (addition of components)</li>
</ul>
</section>
<section id="critically" class="slide level2">
<h2>Critically</h2>
<p>Pre-provisioned data does not need to be “<strong>analytically
valid</strong>” - need only be “<strong>plausible</strong>”!</p>
</section>
<section id="develop-where-feasible" class="slide level2">
<h2>Develop where feasible</h2>
<p>Containers are generalized technology</p>
<ul>
<li>can be run on provisioned university computing infrastucture (most
HPC systems can run containers)</li>
<li>can run on desktops as needed (free container software available for
all major operating systems for non-commercial use)</li>
<li>can run on generic cloud infrastructure (AWS, Google Cloud,
Azure)</li>
<li>can run on custom cloud infrastructure specialized in running
containers (<a href="https://nuvolos.cloud">Nuvolos</a>, <a
href="https://codeocean.com">Codeocean</a>, <a
href="https://www.onyxia.sh/">Onyxia</a>, etc.)</li>
<li>can be prepared by research institutions for use on their custom
infrastructure (e.g., NSF-funded <a href="https://wholetale.org">Whole
Tale project</a>, self-hosted <a
href="https://www.onyxia.sh/">Onyxia</a>)</li>
</ul>
</section>
<section id="whole-tale" class="slide level2">
<h2>Whole Tale</h2>
<p><a href="https://wholetale.org"><img
data-src="images/wholetale-home.png" alt="Whole Tale" /></a></p>
</section>
<section id="codeocean" class="slide level2">
<h2>Codeocean</h2>
<p><a href="https://codeocean.com"><img
data-src="images/codeocean-home.png" alt="Codeocean" /></a></p>
</section>
<section id="onyxia" class="slide level2">
<h2>Onyxia</h2>
<p><a href="https://www.onyxia.sh/"><img data-src="images/onyxia.png"
alt="Onyxia" /></a></p>
</section>
<section id="cost-to-user" class="slide level2">
<h2>Cost to user</h2>
<p>Cost: $0 to low $</p>
</section>
<section id="run-a-container-from-the-command-line"
class="slide level2">
<h2>Run a container from the command line</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## read the file run_docker.sh</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">readLines</span>(<span class="st">&quot;run_docker.sh&quot;</span>),<span class="at">n=</span><span class="dv">1</span>)</span></code></pre></div>
</section>
<section id="run-a-container-from-codeocean" class="slide level2">
<h2>Run a container from Codeocean</h2>
<p><img data-src="images/codeocean-left.png"
alt="Writing code on Codeocean" /></p>
</section>
<section class="slide level2">

<p><img data-src="images/codeocean-right.png"
alt="Running code on Codeocean" /></p>
</section>
<section id="develop-at-will" class="slide level2">
<h2>Develop at will</h2>
<ul>
<li>Arbitrary Stata, R, Python, etc. code</li>
</ul>
<p><img data-src="images/ContainerizedDataCycle.drawio-3.png"
alt="Develop at will" /></p>
</section></section>
<section>
<section id="provider-perspective-secure-build"
class="title-slide slide level1">
<h1>Provider perspective: Secure build</h1>

</section>
<section id="first-impressions" class="slide level2"
data-background-image="images/hacker-security.jpg">
<h2 data-background-image="images/hacker-security.jpg">First
impressions</h2>
<ul>
<li><a href="#/fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a></li>
</ul>
</section>
<section id="internal-build" class="slide level2">
<h2>Internal build</h2>
<ul>
<li>Prepare an internal container, compliant with IT security standards
<ul>
<li>secure configuration of container running system (base system)</li>
<li>add layer of common software (Stata, R, Python, various
combinations) for <strong>analysis system</strong></li>
<li>test suite (scripted) for updates</li>
</ul></li>
</ul>
</section>
<section id="ability-to-leverage-existing-experience"
class="slide level2">
<h2>Ability to leverage existing experience</h2>
<ul>
<li>Can leverage existing container recipes for well-known software
packages (<code>rocker</code> for R containers, <a
href="https://hub.docker.com/r/jupyter/datascience-notebook/">datascience</a>
containers)</li>
<li>Can leverage existing containers and harden the OS (if
necessary)</li>
<li>Already has process in place to securely vet imported libraries and
packages - can be <strong>reused</strong></li>
</ul>
</section>
<section id="public-build" class="slide level2">
<h2>Public build</h2>
<ul>
<li>Public “recipe” is the same as for internal
<ul>
<li>possibly up to secure base container - close enough is good
enough</li>
<li>built by StatAgency itself</li>
</ul></li>
</ul>
</section>
<section id="example-build-internal-analysis-system"
class="slide level2">
<h2>Example: Build internal analysis system</h2>
<div class="sourceCode" id="cb2"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> registry.internal.statagency.gov/os/ubuntu-24.04-secured</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Stata from internal sources (simple tar file), no license</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Install R from internal sources</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">USER</span> rstudio</span></code></pre></div>
</section>
<section id="example-build-public-analysis-system" class="slide level2">
<h2>Example: Build public analysis system</h2>
<div class="sourceCode" id="cb3"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu-24.04</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Stata from internal sources (simple tar file), no license</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Install R from internal sources</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">USER</span> rstudio</span></code></pre></div>
</section>
<section id="optional-elements" class="slide level2">
<h2>Optional elements</h2>
<p>While not strictly necessary, containers might contain</p>
<ul>
<li>development environments (Stata GUI, Jupyter notebooks,
Rstudio)</li>
<li>standard set of libraries (Stata ado files, R libraries, Python
packages)</li>
</ul>
</section>
<section id="public-posting" class="slide level2">
<h2>Public posting</h2>
<p>Prepared containers and recipes can be posted on public
registries:</p>
<ul>
<li>post container on public registry (<a
href="https://hub.docker.com">Docker Hub</a>, <a
href="https://cloud.google.com/container-registry">Google Container
Registry</a>, etc.)</li>
<li>post recipe on public repository (<a
href="https://github.com">GitHub</a>, <a
href="https://gitlab.com">GitLab</a>, etc.)</li>
</ul>
</section>
<section id="posted-on-docker-hub" class="slide level2">
<h2>Posted on Docker Hub</h2>
<p><img data-src="images/dockerhub-stata17.png" alt="Docker Hub" /></p>
</section>
<section id="also-required-data" class="slide level2">
<h2>Also required: data</h2>
<p>But if validation and verification are a key part of it, then data
quality can be lower (<strong>plausible, not analytically
valid</strong>)</p>
<p><img data-src="images/sds-coverage.png" alt="coverage" /></p>
</section></section>
<section>
<section id="validation" class="title-slide slide level1">
<h1>Validation</h1>

</section>
<section id="user-develops" class="slide level2">
<h2>User Develops</h2>
<p><img data-src="images/ContainerizedDataCycle.drawio-3.png"
alt="user develops" /></p>
</section>
<section id="user-tests" class="slide level2">
<h2>User tests</h2>
<p><img data-src="images/ContainerizedDataCycle.drawio-5.png"
alt="user develops" /></p>
</section>
<section id="user-submits-for-validation" class="slide level2">
<h2>User Submits for Validation</h2>
<ul>
<li>Submit container <em>recipe</em> (<code>Dockerfile</code>) and code
for validation to <em>StatAgency.gov</em></li>
</ul>
<pre><code>./Dockerfile
./code/01_prepare_data.R
./code/02_run_analysis.R
./code/03_create_figures.R</code></pre>
</section>
<section id="important-security-aspect" class="slide level2">
<h2>Important security aspect</h2>
<p><strong>No binary code is transmitted</strong></p>
<p>Any external data may need to be vetted.</p>
</section>
<section id="statagency-upon-receipt-of-submission"
class="slide level2">
<h2><em>StatAgency</em> Upon receipt of submission</h2>
<p>(<strong>Automated</strong>) system receives and processes</p>
<pre><code>./Dockerfile
./code/01_prepare_data.R
./code/02_run_analysis.R
./code/03_create_figures.R</code></pre>
</section>
<section id="statagency-validates-reproducibility" class="slide level2">
<h2><em>StatAgency</em> validates reproducibility</h2>
<p>Just to check that user actually did test…</p>
<p><img data-src="images/ContainerizedDataCycle.drawio-5.png"
alt="user develops" /></p>
</section>
<section id="provider-validates-reproducibility" class="slide level2">
<h2>Provider validates reproducibility</h2>
<p>If rejected, <strong>automated system</strong> returns to user
without further ado.</p>
<p>If accepted, proceed to validation step</p>
</section>
<section id="provider-rebuilds-container-using-secure-base-image"
class="slide level2">
<h2>Provider rebuilds container using secure base image</h2>
<ul>
<li>Input is only the <code>Dockerfile</code> recipe</li>
<li>Security scanning of (plaintext) scripts and of resulting image</li>
<li>Build can occur in a sandboxed environment</li>
</ul>
</section>
<section id="necessary-restrictions" class="slide level2">
<h2>Necessary restrictions</h2>
<p>While useful in the public space, when running internally and for
pre-vetting,</p>
<ul>
<li>containers would be restricted in terms of internet access</li>
<li>containers may be built against only known safe sources of packages
(e.g. internal mirrors)</li>
</ul>
</section>
<section id="once-image-is-built" class="slide level2">
<h2>Once image is built</h2>
<p><img data-src="images/ContainerizedDataCycle.drawio-1.png"
alt="validate against confidential data" /></p>
</section>
<section id="validate-against-confidential-data" class="slide level2">
<h2>Validate against confidential data</h2>
<ul>
<li>Same image is used for confidential data</li>
<li>Only difference: swap out public (test) data for confidential
data</li>
<li>Processing may involve more complex processing, for instance
<strong>bootstrapping errors</strong> or <strong>obtaining multiple
estimates</strong> across various partially protected datasets</li>
<li>Disclosure avoidance may involve transparently <strong>modifying
certain functions</strong>, or <strong>post-processing of
results</strong></li>
</ul>
</section>
<section id="return-results-to-user" class="slide level2">
<h2>Return results to user</h2>
<p><img data-src="images/ContainerizedDataCycle.drawio-0.png"
alt="full cycle" /></p>
</section></section>
<section>
<section id="challenges" class="title-slide slide level1">
<h1>Challenges</h1>

</section>
<section id="automation-or-streamlining-of-disclosure-avoidance"
class="slide level2">
<h2>Automation or streamlining of disclosure avoidance</h2>
<p>Scalability of a system <strong>hinges critically on streamlined
output vetting</strong>.</p>
<p>However, the challenge of creating automated and reliable disclosure
avoidance procedures <em>is not unique</em> to the validation process
described here.</p>
</section>
<section id="security-of-containers" class="slide level2">
<h2>Security of containers</h2>
<p>In general, bad idea to blindly run untrusted containers. However,
this is a <strong>solved problem</strong> in the industry, facilitated
by the (expected) sparsity of the build process.</p>
</section>
<section id="user-acceptance" class="slide level2">
<h2>User acceptance</h2>
<p>As a reminder, most social scientists are <strong>not familiar with
containers</strong>.</p>
<ul>
<li><strong>Mitigation</strong>:
<ul>
<li>Off-the-shelf solutions (Codeocean, Whole Tale, Onyxia)</li>
<li>IT support at universities and research institutions</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="advantages" class="title-slide slide level1">
<h1>Advantages</h1>

</section>
<section id="existing-technology" class="slide level2">
<h2>Existing technology</h2>
<ul>
<li>Containers are well-known technology, including in other
sciences</li>
<li>Used by online services (Codeocean, Onyxia, but also Overleaf,
etc.)</li>
</ul>
</section>
<section id="scalability" class="slide level2">
<h2>Scalability</h2>
<ul>
<li>Easy to scale to large number of users</li>
<li>Easy to scale to technologies that allow for sophisticated but
computing intensive disclosure avoidance</li>
</ul>
</section>
<section id="cheap" class="slide level2">
<h2>Cheap</h2>
<ul>
<li>for users
<ul>
<li>most of the core enabling technology is free to use</li>
<li>support by university IT is generally available</li>
</ul></li>
<li>for providers (<em>StatAgency</em>)
<ul>
<li>no need to provision scaled infrastructure for users</li>
<li>can leverage existing on-site software stacks (e.g., assuming that
anything used internally is already security-vetted)</li>
</ul></li>
</ul>
</section>
<section id="additional-benefit" class="slide level2">
<h2>Additional benefit</h2>
<ul>
<li><strong>StatAgency</strong> can accumulate a library of confirmed
reproducible containers and models, and can test out new data,
disclosure methods, etc. at scale against prior scientific findings</li>
</ul>
<div class="fragment">
<p><strong>Consider the new disclosure avoidance method for ACS
2035</strong></p>
<ul>
<li>Can be tested against every submitted model that used prior ACS, as
long as database schema is the same.</li>
</ul>
</div>
</section></section>
<section id="thank-you" class="title-slide slide level1">
<h1>Thank you</h1>

</section>

<section>
<section id="quick-links-for-the-curious"
class="title-slide slide level1">
<h1>Quick links for the curious</h1>
<ul>
<li><a
href="https://www.datacamp.com/tutorial/docker-for-data-science-introduction">https://www.datacamp.com/tutorial/docker-for-data-science-introduction</a></li>
<li><a href="https://codeocean.com/">CodeOcean</a></li>
<li><a href="https://wholetale.org/">Whole Tale</a></li>
<li><a href="https://www.onyxia.sh/">Onyxia</a></li>
<li><a href="https://hub.docker.com/">Docker Hub</a></li>
<li><a href="https://github.com/AEADataEditor/docker-stata">Stata on
Docker</a></li>
</ul>
</section>
<section class="slide level2">

<p><img data-src="images/codeocean-chahrour.png"
alt="MATLAB on Codeocean" /></p>
</section></section>
<section id="this-presentation" class="title-slide slide level1">
<h1>This presentation</h1>
<ul>
<li><a
href="https://github.com/larsvilhuber/NBER-2024-presentation">Github</a></li>
<li><a
href="https://larsvilhuber.github.io/NBER-2024-presentation/">Presentation</a>
<ul>
<li><a
href="https://github.com/larsvilhuber/NBER-2024-presentation/blob/cae14a22485c2bdf1cb91e1ade5df5893a85f424/build/Dockerfile">Dockerfile!</a></li>
<li><a
href="https://hub.docker.com/r/larsvilhuber/nber-presentation">Container!</a></li>
</ul></li>
</ul>
</section>

<section id="references" class="title-slide slide level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent"
role="list">
<div id="ref-barrientos_providing_2018" class="csl-entry"
role="listitem">
Barrientos, Andrés F., Alexander Bolton, Tom Balmat, Jerome P. Reiter,
John M. de Figueiredo, Ashwin Machanavajjhala, Yan Chen, Charley
Kneifel, and Mark DeLong. 2018. <span>“Providing <span>Access</span> to
<span>Confidential</span> <span>Research</span> <span>Data</span>
<span>Through</span> <span>Synthesis</span> and
<span>Verification</span>: <span>An</span> <span>Application</span> to
<span>Data</span> on <span>Employees</span> of the
<span>U</span>.<span>S</span>. <span>Federal</span>
<span>Government</span>.”</span> <em>The Annals of Applied
Statistics</em>, June. <a
href="http://arxiv.org/abs/1705.07872">http://arxiv.org/abs/1705.07872</a>.
</div>
<div id="ref-boettiger_introduction_2015" class="csl-entry"
role="listitem">
Boettiger, Carl. 2015. <span>“An Introduction to <span>Docker</span> for
Reproducible Research.”</span> <em>ACM SIGOPS Operating Systems
Review</em> 49 (1): 71–79. <a
href="https://doi.org/10.1145/2723872.2723882">https://doi.org/10.1145/2723872.2723882</a>.
</div>
</div>
</section>

<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a
href="https://www.datacamp.com/tutorial/docker-for-data-science-introduction">https://www.datacamp.com/tutorial/docker-for-data-science-introduction</a><a
href="#/fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>An earlier version of this presentation mentioned <a
href="https://gigantum.com">Gigantum</a>. As is not unusual in this
space, Gigantum no longer functions as a company.<a href="#/fnref2"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Image credit <a
href="https://www.flickr.com/photos/140988606@N08/27509199696">Christopher
Scholz</a>, under <img data-src="images/by-sa.png"
alt="CC-By-SA 2.0" /><a
href="https://creativecommons.org/licenses/by-sa/2.0/">CC-By-SA
2.0</a><a href="#/fnref3" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
    </div>
  </div>

  <script src="index_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="index_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Enable keyboard shortcuts for navigation
        keyboard: true,
        // Enable the slide overview mode
        overview: true,
        // Vertical centering of slides
        center: true,
        // Enables touch navigation on devices with touch input
        touch: true,
        // Turns fragments on and off globally
        fragments: true,
        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,
        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,
        // Stop auto-sliding after user input
        autoSlideStoppable: true,
        // Opens links in an iframe preview overlay
        previewLinks: false,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Transition speed
        transitionSpeed: 'default', // default/fast/slow
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom
        // Number of slides away from the current that are visible
        viewDistance: 3,



        chalkboard: {
          toggleNotesButton: true,
          theme: 'chalkboard',
        },

        keyboard: {
          67: function() { RevealChalkboard.toggleNotesCanvas() },    // toggle notes canvas when 'c' is pressed
          66: function() { RevealChalkboard.toggleChalkboard() }, // toggle chalkboard when 'b' is pressed
          46: function() { RevealChalkboard.clear() },    // clear chalkboard when 'DEL' is pressed
           8: function() { RevealChalkboard.reset() },    // reset chalkboard data on current slide when 'BACKSPACE' is pressed
          68: function() { RevealChalkboard.download() }, // downlad recorded chalkboard drawing when 'd' is pressed
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: 'index_files/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js', async: true },
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
